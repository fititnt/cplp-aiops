# FILE:         /etc/nginx/sites-available/usuario.apb.etica.ai.conf
#
# DESCRIPTION:  Do NGinx para servir conteúdo padrão para todos os usuarios
#               do servidor. Isto é, não inclui dominios customizados.
#               É usado para os dominios:
#                   - usuario.apb.etica.ai
#                   - usuario.lb-ap.etica.ai
#               Veja também:
#                   - https://github.com/fititnt/cplp-aiops/issues/35
#                   - https://github.com/fititnt/cplp-aiops/issues/40
#
# DATE:         2019-05-24
# ORGANIZATION: Etica.AI
# AUTHORS:      Emerson Rocha <rocha at ieee.org>
# LICENSE:      Public Domain

server {

    listen 80;
    listen [::]:80;
    root /var/www/html;

    index index.html;

    server_name usuario.apb.etica.ai usuario.lb-ap.etica.ai;

    #location / {
    #    try_files $uri $uri/ =404;
    #}

    # Serve conteudo de, por exemplo,
    #    http://usuario.apb.etica.ai/~usuariodeteste
    # para conteúdo de
    #    /home2/usuariodeteste/web/public_html
    location ~ ^/~(.+?)(/.*)?$ {
        alias /home2/$1/web/public_html$2;
        index  index.html index.htm;
        autoindex on;
    }
}